@page "/"
@inject QuanLyPhongTro.Data.QuanLyPhongTroContext DB
@using Microsoft.EntityFrameworkCore
@using QuanLyPhongTro
<PageTitle>Home</PageTitle>
@rendermode InteractiveServer


<h1>Hello, world!</h1>

Welcome to your new app.

<!-- Search feature -->
<div>
    <input @bind="searchLocation" placeholder="Enter location" />
    <button @onclick="SearchPhongTro">Search</button>
</div>

<!-- Display search results -->
@if (searchResults != null)
{
foreach (var phongTro in searchResults)
{
<p>@phongTro.MaPhongTro - @phongTro.TrangThai</p>
}
}

@code {
    string searchLocation = string.Empty;
    List<PhongTro> searchResults;

    async Task SearchPhongTro()
    {
        if (string.IsNullOrEmpty(searchLocation))
        {
            searchResults = new List<PhongTro>();
        }
        else
        {
            searchResults = await DB.PhongTro
                .Where(pt => pt.DiaChi.Contains(searchLocation))
                .ToListAsync();
        }
    }

}
